!function(t,e){function n(){A||(A={verbose:!1,queryLimit:{attempt:5,delay:250,random:250},classes:{Map:google.maps.Map,Marker:google.maps.Marker,InfoWindow:google.maps.InfoWindow,Circle:google.maps.Circle,Rectangle:google.maps.Rectangle,OverlayView:google.maps.OverlayView,StreetViewPanorama:google.maps.StreetViewPanorama,KmlLayer:google.maps.KmlLayer,TrafficLayer:google.maps.TrafficLayer,BicyclingLayer:google.maps.BicyclingLayer,GroundOverlay:google.maps.GroundOverlay,StyledMapType:google.maps.StyledMapType,ImageMapType:google.maps.ImageMapType},map:{mapTypeId:google.maps.MapTypeId.ROADMAP,center:[46.578498,2.457275],zoom:2},overlay:{pane:"floatPane",content:"",offset:{x:0,y:0}},geoloc:{getCurrentPosition:{maximumAge:6e4,timeout:5e3}}})}function i(t,n){return t!==e?t:"gmap3_"+(n?F+1:++F)}function a(t){var e,n=function(t){return parseInt(t,10)},i=google.maps.version.split(".").map(n);for(t=t.split(".").map(n),e=0;e<t.length;e++){if(!i.hasOwnProperty(e))return!1;if(i[e]<t[e])return!1}return!0}function s(e,n,i,a,s){if(n.todo.events||n.todo.onces){var o={id:a,data:n.todo.data,tag:n.todo.tag};n.todo.events&&t.each(n.todo.events,function(n,a){var r=e,l=a;t.isArray(a)&&(r=a[0],l=a[1]),google.maps.event.addListener(i,n,function(t){l.apply(r,[s?s:i,t,o])})}),n.todo.onces&&t.each(n.todo.onces,function(n,a){var r=e,l=a;t.isArray(a)&&(r=a[0],l=a[1]),google.maps.event.addListenerOnce(i,n,function(t){l.apply(r,[s?s:i,t,o])})})}}function o(){var t=[];this.empty=function(){return!t.length},this.add=function(e){t.push(e)},this.get=function(){return t.length?t[0]:!1},this.ack=function(){t.shift()}}function r(e,n,i){function a(t){var e={};return e[t]={},e}function s(){var t;for(t in i)if(!(t in r))return t}var o,r={},l=this,u={latLng:{map:!1,marker:!1,infowindow:!1,circle:!1,overlay:!1,getlatlng:!1,getmaxzoom:!1,getelevation:!1,streetviewpanorama:!1,getaddress:!0},geoloc:{getgeoloc:!0}};"string"==typeof i&&(i=a(i)),this.run=function(){for(var a,l;a=s();){if("function"==typeof e[a])return o=a,l=t.extend(!0,{},A[a]||{},i[a].options||{}),a in u.latLng?i[a].values?N(i[a].values,e,e[a],{todo:i[a],opts:l,session:r}):S(e,e[a],u.latLng[a],{todo:i[a],opts:l,session:r}):a in u.geoloc?E(e,e[a],{todo:i[a],opts:l,session:r}):e[a].apply(e,[{todo:i[a],opts:l,session:r}]),void 0;r[a]=null}n.apply(e,[i,r])},this.ack=function(t){r[o]=t,l.run.apply(l,[])}}function l(t){var e,n=[];for(e in t)n.push(e);return n}function u(e,n){var i={};if(e.todo)for(var a in e.todo)"options"!==a&&"values"!==a&&(i[a]=e.todo[a]);var s,o=["data","tag","id","events","onces"];for(s=0;s<o.length;s++)c(i,o[s],n,e.todo);return i.options=t.extend({},e.opts||{},n.options||{}),i}function c(t,e){for(var n=2;n<arguments.length;n++)if(e in arguments[n])return t[e]=arguments[n][e],void 0}function d(){var t=[];this.get=function(e){if(t.length){var n,i,a,s,o,r=l(e);for(n=0;n<t.length;n++){for(s=t[n],o=r.length==s.keys.length,i=0;i<r.length&&o;i++)a=r[i],o=a in s.request,o&&(o="object"==typeof e[a]&&"equals"in e[a]&&"function"==typeof e[a]?e[a].equals(s.request[a]):e[a]===s.request[a]);if(o)return s.results}}},this.store=function(e,n){t.push({request:e,keys:l(e),results:n})}}function h(e,n,i,a){var s=this,o=[];A.classes.OverlayView.call(this),this.setMap(e),this.onAdd=function(){var e=this.getPanes();n.pane in e&&t(e[n.pane]).append(a),t.each("dblclick click mouseover mousemove mouseout mouseup mousedown".split(" "),function(e,n){o.push(google.maps.event.addDomListener(a[0],n,function(e){t.Event(e).stopPropagation(),google.maps.event.trigger(s,n,[e]),s.draw()}))}),o.push(google.maps.event.addDomListener(a[0],"contextmenu",function(e){t.Event(e).stopPropagation(),google.maps.event.trigger(s,"rightclick",[e]),s.draw()}))},this.getPosition=function(){return i},this.draw=function(){var t=this.getProjection().fromLatLngToDivPixel(i);a.css("left",t.x+n.offset.x+"px").css("top",t.y+n.offset.y+"px")},this.onRemove=function(){for(var t=0;t<o.length;t++)google.maps.event.removeListener(o[t]);a.remove()},this.hide=function(){a.hide()},this.show=function(){a.show()},this.toggle=function(){a&&(a.is(":visible")?this.show():this.hide())},this.toggleDOM=function(){this.getMap()?this.setMap(null):this.setMap(e)},this.getDOMElement=function(){return a[0]}}function p(t){function e(){return this.onAdd=function(){},this.onRemove=function(){},this.draw=function(){},A.classes.OverlayView.apply(this,[])}e.prototype=A.classes.OverlayView.prototype;var n=new e;return n.setMap(t),n}function g(e,n,a){function o(t){L[t]||(delete F[t].options.map,L[t]=new A.classes.Marker(F[t].options),s(e,{todo:F[t]},L[t],F[t].id))}function r(){return(v=O.getProjection())?(M=!0,S.push(google.maps.event.addListener(n,"zoom_changed",function(){h()})),S.push(google.maps.event.addListener(n,"bounds_changed",function(){h()})),f(),void 0):(setTimeout(function(){r.apply(I,[])},25),void 0)}function l(t){"object"==typeof N[t]?("function"==typeof N[t].obj.setMap&&N[t].obj.setMap(null),"function"==typeof N[t].obj.remove&&N[t].obj.remove(),"function"==typeof N[t].shadow.remove&&N[t].obj.remove(),"function"==typeof N[t].shadow.setMap&&N[t].shadow.setMap(null),delete N[t].obj,delete N[t].shadow):L[t]&&L[t].setMap(null),delete N[t]}function u(){var t,e,n,i,a,s,o,r;return arguments[0]instanceof google.maps.LatLng?(t=arguments[0].lat(),n=arguments[0].lng(),arguments[1]instanceof google.maps.LatLng?(e=arguments[1].lat(),i=arguments[1].lng()):(e=arguments[1],i=arguments[2])):(t=arguments[0],n=arguments[1],arguments[2]instanceof google.maps.LatLng?(e=arguments[2].lat(),i=arguments[2].lng()):(e=arguments[2],i=arguments[3])),a=Math.PI*t/180,s=Math.PI*n/180,o=Math.PI*e/180,r=Math.PI*i/180,6371e3*Math.acos(Math.min(Math.cos(a)*Math.cos(o)*Math.cos(s)*Math.cos(r)+Math.cos(a)*Math.sin(s)*Math.cos(o)*Math.sin(r)+Math.sin(a)*Math.sin(o),1))}function c(){var t=u(n.getCenter(),n.getBounds().getNorthEast()),e=new google.maps.Circle({center:n.getCenter(),radius:1.25*t});return e.getBounds()}function d(){var t,e={};for(t in N)e[t]=!0;return e}function h(){clearTimeout(m),m=setTimeout(function(){f()},25)}function g(t){var e=v.fromLatLngToDivPixel(t),n=v.fromDivPixelToLatLng(new google.maps.Point(e.x+a.radius,e.y-a.radius)),i=v.fromDivPixelToLatLng(new google.maps.Point(e.x-a.radius,e.y+a.radius));return new google.maps.LatLngBounds(i,n)}function f(){if(!k&&!w&&M){var e,i,s,o,r,u,h,p,f,m,v,b=[],C={},I=n.getZoom(),S="maxZoom"in a&&I>a.maxZoom,E=d(),T=!1;for(D=!1,I>3&&(r=c(),T=r.getSouthWest().lng()<r.getNorthEast().lng()),e=0;e<F.length;e++)!F[e]||T&&!r.contains(F[e].options.position)||y&&!y(j[e])||b.push(e);for(;;){for(e=0;C[e]&&e<b.length;)e++;if(e==b.length)break;if(o=[],x&&!S){v=10;do for(p=o,o=[],v--,h=p.length?r.getCenter():F[b[e]].options.position,r=g(h),i=e;i<b.length;i++)C[i]||r.contains(F[b[i]].options.position)&&o.push(i);while(p.length<o.length&&o.length>1&&v)}else for(i=e;i<b.length;i++)if(!C[i]){o.push(i);break}for(u={indexes:[],ref:[]},f=m=0,s=0;s<o.length;s++)C[o[s]]=!0,u.indexes.push(b[o[s]]),u.ref.push(b[o[s]]),f+=F[b[o[s]]].options.position.lat(),m+=F[b[o[s]]].options.position.lng();f/=o.length,m/=o.length,u.latLng=new google.maps.LatLng(f,m),u.ref=u.ref.join("-"),u.ref in E?delete E[u.ref]:(1===o.length&&(N[u.ref]=!0),_(u))}t.each(E,function(t){l(t)}),w=!1}}var m,v,y,_,b,k=!1,D=!1,w=!1,M=!1,x=!0,I=this,S=[],N={},E={},T={},L=[],F=[],j=[],O=p(n,a.radius);r(),this.getById=function(t){return t in E?(o(E[t]),L[E[t]]):!1},this.rm=function(t){var e=E[t];L[e]&&L[e].setMap(null),delete L[e],L[e]=!1,delete F[e],F[e]=!1,delete j[e],j[e]=!1,delete E[t],delete T[e],D=!0},this.clearById=function(t){return t in E?(this.rm(t),!0):void 0},this.clear=function(t,e,n){var i,a,s,o,r,l=[],u=C(n);for(t?(i=F.length-1,a=-1,s=-1):(i=0,a=F.length,s=1),o=i;o!=a&&(!F[o]||u&&!u(F[o].tag)||(l.push(T[o]),!e&&!t));o+=s);for(r=0;r<l.length;r++)this.rm(l[r])},this.add=function(t,e){t.id=i(t.id),this.clearById(t.id),E[t.id]=L.length,T[L.length]=t.id,L.push(null),F.push(t),j.push(e),D=!0},this.addMarker=function(t,n){n=n||{},n.id=i(n.id),this.clearById(n.id),n.options||(n.options={}),n.options.position=t.getPosition(),s(e,{todo:n},t,n.id),E[n.id]=L.length,T[L.length]=n.id,L.push(t),F.push(n),j.push(n.data||{}),D=!0},this.todo=function(t){return F[t]},this.value=function(t){return j[t]},this.marker=function(t){return t in L?(o(t),L[t]):!1},this.markerIsSet=function(t){return Boolean(L[t])},this.setMarker=function(t,e){L[t]=e},this.store=function(t,e,n){N[t.ref]={obj:e,shadow:n}},this.free=function(){for(var e=0;e<S.length;e++)google.maps.event.removeListener(S[e]);S=[],t.each(N,function(t){l(t)}),N={},t.each(F,function(t){F[t]=null}),F=[],t.each(L,function(t){L[t]&&(L[t].setMap(null),delete L[t])}),L=[],t.each(j,function(t){delete j[t]}),j=[],E={},T={}},this.filter=function(t){y=t,f()},this.enable=function(t){x!=t&&(x=t,f())},this.display=function(t){_=t},this.error=function(t){b=t},this.beginUpdate=function(){k=!0},this.endUpdate=function(){k=!1,D&&f()},this.autofit=function(t){for(var e=0;e<F.length;e++)F[e]&&t.extend(F[e].options.position)}}function f(t,e){this.id=function(){return t},this.filter=function(t){e.filter(t)},this.enable=function(){e.enable(!0)},this.disable=function(){e.enable(!1)},this.add=function(t,n,i){i||e.beginUpdate(),e.addMarker(t,n),i||e.endUpdate()},this.getById=function(t){return e.getById(t)},this.clearById=function(t,n){var i;return n||e.beginUpdate(),i=e.clearById(t),n||e.endUpdate(),i},this.clear=function(t,n,i,a){a||e.beginUpdate(),e.clear(t,n,i),a||e.endUpdate()}}function m(){function n(t){return{id:t.id,name:t.name,object:t.obj,tag:t.tag,data:t.data}}function a(t){"function"==typeof t.setMap&&t.setMap(null),"function"==typeof t.remove&&t.remove(),"function"==typeof t.free&&t.free(),t=null}var s={},o={};this.add=function(t,e,n,a){var r=t.todo||{},l=i(r.id);return s[e]||(s[e]=[]),l in o&&this.clearById(l),o[l]={obj:n,sub:a,name:e,id:l,tag:r.tag,data:r.data},s[e].push(l),l},this.getById=function(t,e,i){return t in o?e?o[t].sub:i?n(o[t]):o[t].obj:!1},this.get=function(t,e,i,a){var r,l,u=C(i);if(!s[t]||!s[t].length)return null;for(r=s[t].length;r;)if(r--,l=s[t][e?r:s[t].length-r-1],l&&o[l]){if(u&&!u(o[l].tag))continue;return a?n(o[l]):o[l].obj}return null},this.all=function(t,i,a){var r=[],l=C(i),u=function(t){var e,i;for(e=0;e<s[t].length;e++)if(i=s[t][e],i&&o[i]){if(l&&!l(o[i].tag))continue;r.push(a?n(o[i]):o[i].obj)}};if(t in s)u(t);else if(t===e)for(t in s)u(t);return r},this.rm=function(t,e,n){var i,a;if(!s[t])return!1;if(e)if(n)for(i=s[t].length-1;i>=0&&(a=s[t][i],!e(o[a].tag));i--);else for(i=0;i<s[t].length&&(a=s[t][i],!e(o[a].tag));i++);else i=n?s[t].length-1:0;return i in s[t]?this.clearById(s[t][i],i):!1},this.clearById=function(t,n){if(t in o){var i,r=o[t].name;for(i=0;n===e&&i<s[r].length;i++)t===s[r][i]&&(n=i);return a(o[t].obj),o[t].sub&&a(o[t].sub),delete o[t],s[r].splice(n,1),!0}return!1},this.objGetById=function(t){var e;if(s.clusterer)for(var n in s.clusterer)if((e=o[s.clusterer[n]].obj.getById(t))!==!1)return e;return!1},this.objClearById=function(t){if(s.clusterer)for(var e in s.clusterer)if(o[s.clusterer[e]].obj.clearById(t))return!0;return null},this.clear=function(t,e,n,i){var a,o,r,l=C(i);if(t&&t.length)t=M(t);else{t=[];for(a in s)t.push(a)}for(o=0;o<t.length;o++)if(r=t[o],e)this.rm(r,l,!0);else if(n)this.rm(r,l,!1);else for(;this.rm(r,l,!1););},this.objClear=function(e,n,i,a){if(s.clusterer&&(t.inArray("marker",e)>=0||!e.length))for(var r in s.clusterer)o[s.clusterer[r]].obj.clear(n,i,a)}}function v(){return j.geocoder||(j.geocoder=new google.maps.Geocoder),j.geocoder}function y(){return j.directionsService||(j.directionsService=new google.maps.DirectionsService),j.directionsService}function _(){return j.elevationService||(j.elevationService=new google.maps.ElevationService),j.elevationService}function b(){return j.maxZoomService||(j.maxZoomService=new google.maps.MaxZoomService),j.maxZoomService}function k(){return j.distanceMatrixService||(j.distanceMatrixService=new google.maps.DistanceMatrixService),j.distanceMatrixService}function D(){if(A.verbose){var t,e=[];if(window.console&&"function"==typeof console.error){for(t=0;t<arguments.length;t++)e.push(arguments[t]);console.error.apply(console,e)}else{for(e="",t=0;t<arguments.length;t++)e+=arguments[t].toString()+" ";alert(e)}}}function w(t){return("number"==typeof t||"string"==typeof t)&&""!==t&&!isNaN(t)}function M(t){var n,i=[];if(t!==e)if("object"==typeof t)if("number"==typeof t.length)i=t;else for(n in t)i.push(t[n]);else i.push(t);return i}function C(n){return n?"function"==typeof n?n:(n=M(n),function(i){if(i===e)return!1;if("object"==typeof i){for(var a=0;a<i.length;a++)if(t.inArray(i[a],n)>=0)return!0;return!1}return t.inArray(i,n)>=0}):void 0}function x(e,n,i){var a=n?e:null;return e&&"string"!=typeof e?e.latLng?x(e.latLng):e instanceof google.maps.LatLng?e:w(e.lat)?new google.maps.LatLng(e.lat,e.lng):!i&&t.isArray(e)?w(e[0])&&w(e[1])?new google.maps.LatLng(e[0],e[1]):a:a:a}function I(e){var n,i;return!e||e instanceof google.maps.LatLngBounds?e||null:(t.isArray(e)?2==e.length?(n=x(e[0]),i=x(e[1])):4==e.length&&(n=x([e[0],e[1]]),i=x([e[2],e[3]])):"ne"in e&&"sw"in e?(n=x(e.ne),i=x(e.sw)):"n"in e&&"e"in e&&"s"in e&&"w"in e&&(n=x([e.n,e.e]),i=x([e.s,e.w])),n&&i?new google.maps.LatLngBounds(i,n):null)}function S(t,e,n,i,a){var s=n?x(i.todo,!1,!0):!1,o=s?{latLng:s}:i.todo.address?"string"==typeof i.todo.address?{address:i.todo.address}:i.todo.address:!1,r=o?O.get(o):!1,l=this;o?(a=a||0,r?(i.latLng=r.results[0].geometry.location,i.results=r.results,i.status=r.status,e.apply(t,[i])):(o.location&&(o.location=x(o.location)),o.bounds&&(o.bounds=I(o.bounds)),v().geocode(o,function(s,r){r===google.maps.GeocoderStatus.OK?(O.store(o,{results:s,status:r}),i.latLng=s[0].geometry.location,i.results=s,i.status=r,e.apply(t,[i])):r===google.maps.GeocoderStatus.OVER_QUERY_LIMIT&&a<A.queryLimit.attempt?setTimeout(function(){S.apply(l,[t,e,n,i,a+1])},A.queryLimit.delay+Math.floor(Math.random()*A.queryLimit.random)):(D("geocode failed",r,o),i.latLng=i.results=!1,i.status=r,e.apply(t,[i]))}))):(i.latLng=x(i.todo,!1,!0),e.apply(t,[i]))}function N(e,n,i,a){function s(){do r++;while(r<e.length&&!("address"in e[r]));return r>=e.length?(i.apply(n,[a]),void 0):(S(o,function(n){delete n.todo,t.extend(e[r],n),s.apply(o,[])},!0,{todo:e[r]}),void 0)}var o=this,r=-1;s()}function E(t,e,n){var i=!1;navigator&&navigator.geolocation?navigator.geolocation.getCurrentPosition(function(a){i||(i=!0,n.latLng=new google.maps.LatLng(a.coords.latitude,a.coords.longitude),e.apply(t,[n]))},function(){i||(i=!0,n.latLng=!1,e.apply(t,[n]))},n.opts.getCurrentPosition):(n.latLng=!1,e.apply(t,[n]))}function T(n){function l(){!S&&(S=E.get())&&S.run()}function c(){S=null,E.ack(),l.call(N)}function d(e){if(e.todo.callback){var i=Array.prototype.slice.call(arguments,1);"function"==typeof e.todo.callback?e.todo.callback.apply(n,i):t.isArray(e.todo.callback)&&"function"==typeof e.todo.callback[1]&&e.todo.callback[1].apply(e.todo.callback[0],i)}}function p(t,e,i){i&&s(n,t,e,i),d(t,e),S.ack(e)}function v(e,i){if(i=i||{},L)i.todo&&i.todo.options&&(i.todo.options.center&&(i.todo.options.center=x(i.todo.options.center)),L.setOptions(i.todo.options));else{var a=i.opts||t.extend(!0,{},A.map,i.todo&&i.todo.options?i.todo.options:{});a.center=e||x(a.center),L=new A.classes.Map(n.get(0),a)}}function w(e,i,a){var o=[],r="values"in e.todo;return r||(e.todo.values=[{options:e.opts}]),e.todo.values.length?(v(),t.each(e.todo.values,function(r,l){var c,d,h,p,g=u(e,l);if(g.options[a])if(g.options[a][0][0]&&t.isArray(g.options[a][0][0]))for(d=0;d<g.options[a].length;d++)for(h=0;h<g.options[a][d].length;h++)g.options[a][d][h]=x(g.options[a][d][h]);else for(d=0;d<g.options[a].length;d++)g.options[a][d]=x(g.options[a][d]);g.options.map=L,p=new google.maps[i](g.options),o.push(p),c=T.add({todo:g},i.toLowerCase(),p),s(n,{todo:g},p,c)}),p(e,r?o:o[0]),void 0):(p(e,!1),void 0)}function C(i){var a,o,r=new g(n,L,i),l={},u={},c=[],d=/^[0-9]+$/;for(o in i)d.test(o)?(c.push(1*o),u[o]=i[o],u[o].width=u[o].width||0,u[o].height=u[o].height||0):l[o]=i[o];return c.sort(function(t,e){return t>e}),a=l.calculator?function(e){var i=[];return t.each(e,function(t,e){i.push(r.value(e))}),l.calculator.apply(n,[i])}:function(t){return t.length},r.error(function(){D.apply(N,arguments)}),r.display(function(o){var d,h,p,g,f,m=a(o.indexes);if(i.force||m>1)for(d=0;d<c.length;d++)c[d]<=m&&(h=u[c[d]]);h?(f=h.offset||[-h.width/2,-h.height/2],p=t.extend({},l),p.options=t.extend({pane:"overlayLayer",content:h.content?h.content.replace("CLUSTER_COUNT",m):"",offset:{x:("x"in f?f.x:f[0])||0,y:("y"in f?f.y:f[1])||0}},l.options||{}),g=N.overlay({todo:p,opts:p.options,latLng:x(o)},!0),p.options.pane="floatShadow",p.options.content=t(document.createElement("div")).width(h.width+"px").height(h.height+"px").css({cursor:"pointer"}),shadow=N.overlay({todo:p,opts:p.options,latLng:x(o)},!0),l.data={latLng:x(o),markers:[]},t.each(o.indexes,function(t,e){l.data.markers.push(r.value(e)),r.markerIsSet(e)&&r.marker(e).setMap(null)}),s(n,{todo:l},shadow,e,{main:g,shadow:shadow}),r.store(o,g,shadow)):t.each(o.indexes,function(t,e){r.marker(e).setMap(L)})}),r}var S,N=this,E=new o,T=new m,L=null;this._plan=function(t){for(var e=0;e<t.length;e++)E.add(new r(N,c,t[e]));l()},this.map=function(t){v(t.latLng,t),s(n,t,L),p(t,L)},this.destroy=function(t){T.clear(),n.empty(),L&&(L=null),p(t,!0)},this.infowindow=function(i){var a=[],o="values"in i.todo;o||(i.latLng&&(i.opts.position=i.latLng),i.todo.values=[{options:i.opts}]),t.each(i.todo.values,function(t,r){var l,c,d=u(i,r);d.options.position=d.options.position?x(d.options.position):x(r.latLng),L||v(d.options.position),c=new A.classes.InfoWindow(d.options),c&&(d.open===e||d.open)&&(o?c.open(L,d.anchor?d.anchor:e):c.open(L,d.anchor?d.anchor:i.latLng?e:i.session.marker?i.session.marker:e)),a.push(c),l=T.add({todo:d},"infowindow",c),s(n,{todo:d},c,l)}),p(i,o?a:a[0])},this.circle=function(e){var i=[],a="values"in e.todo;return a||(e.opts.center=e.latLng||x(e.opts.center),e.todo.values=[{options:e.opts}]),e.todo.values.length?(t.each(e.todo.values,function(t,a){var o,r,l=u(e,a);l.options.center=l.options.center?x(l.options.center):x(a),L||v(l.options.center),l.options.map=L,r=new A.classes.Circle(l.options),i.push(r),o=T.add({todo:l},"circle",r),s(n,{todo:l},r,o)}),p(e,a?i:i[0]),void 0):(p(e,!1),void 0)},this.overlay=function(e,i){var a=[],o="values"in e.todo;return o||(e.todo.values=[{latLng:e.latLng,options:e.opts}]),e.todo.values.length?(h.__initialised||(h.prototype=new A.classes.OverlayView,h.__initialised=!0),t.each(e.todo.values,function(o,r){var l,c,d=u(e,r),p=t(document.createElement("div")).css({border:"none",borderWidth:"0px",position:"absolute"});p.append(d.options.content),c=new h(L,d.options,x(d)||x(r),p),a.push(c),p=null,i||(l=T.add(e,"overlay",c),s(n,{todo:d},c,l))}),i?a[0]:(p(e,o?a:a[0]),void 0)):(p(e,!1),void 0)},this.getaddress=function(t){d(t,t.results,t.status),S.ack()},this.getlatlng=function(t){d(t,t.results,t.status),S.ack()},this.getmaxzoom=function(t){b().getMaxZoomAtLatLng(t.latLng,function(e){d(t,e.status===google.maps.MaxZoomStatus.OK?e.zoom:!1,status),S.ack()})},this.getelevation=function(t){var e,n=[],i=function(e,n){d(t,n===google.maps.ElevationStatus.OK?e:!1,n),S.ack()};if(t.latLng)n.push(t.latLng);else for(n=M(t.todo.locations||[]),e=0;e<n.length;e++)n[e]=x(n[e]);if(n.length)_().getElevationForLocations({locations:n},i);else{if(t.todo.path&&t.todo.path.length)for(e=0;e<t.todo.path.length;e++)n.push(x(t.todo.path[e]));n.length?_().getElevationAlongPath({path:n,samples:t.todo.samples},i):S.ack()}},this.defaults=function(e){t.each(e.todo,function(e,n){A[e]="object"==typeof A[e]?t.extend({},A[e],n):n}),S.ack(!0)},this.rectangle=function(e){var i=[],a="values"in e.todo;return a||(e.todo.values=[{options:e.opts}]),e.todo.values.length?(t.each(e.todo.values,function(t,a){var o,r,l=u(e,a);l.options.bounds=l.options.bounds?I(l.options.bounds):I(a),L||v(l.options.bounds.getCenter()),l.options.map=L,r=new A.classes.Rectangle(l.options),i.push(r),o=T.add({todo:l},"rectangle",r),s(n,{todo:l},r,o)}),p(e,a?i:i[0]),void 0):(p(e,!1),void 0)},this.polyline=function(t){w(t,"Polyline","path")},this.polygon=function(t){w(t,"Polygon","paths")},this.trafficlayer=function(t){v();var e=T.get("trafficlayer");e||(e=new A.classes.TrafficLayer,e.setMap(L),T.add(t,"trafficlayer",e)),p(t,e)},this.bicyclinglayer=function(t){v();var e=T.get("bicyclinglayer");e||(e=new A.classes.BicyclingLayer,e.setMap(L),T.add(t,"bicyclinglayer",e)),p(t,e)},this.groundoverlay=function(t){t.opts.bounds=I(t.opts.bounds),t.opts.bounds&&v(t.opts.bounds.getCenter());var e,n=new A.classes.GroundOverlay(t.opts.url,t.opts.bounds,t.opts.opts);n.setMap(L),e=T.add(t,"groundoverlay",n),p(t,n,e)},this.streetviewpanorama=function(e){e.opts.opts||(e.opts.opts={}),e.latLng?e.opts.opts.position=e.latLng:e.opts.opts.position&&(e.opts.opts.position=x(e.opts.opts.position)),e.todo.divId?e.opts.container=document.getElementById(e.todo.divId):e.opts.container&&(e.opts.container=t(e.opts.container).get(0));var n,i=new A.classes.StreetViewPanorama(e.opts.container,e.opts.opts);i&&L.setStreetView(i),n=T.add(e,"streetviewpanorama",i),p(e,i,n)},this.kmllayer=function(e){var i=[],o="values"in e.todo;return o||(e.todo.values=[{options:e.opts}]),e.todo.values.length?(t.each(e.todo.values,function(t,o){var r,l,c,d=u(e,o);L||v(),c=d.options,d.options.opts&&(c=d.options.opts,d.options.url&&(c.url=d.options.url)),c.map=L,l=a("3.10")?new A.classes.KmlLayer(c):new A.classes.KmlLayer(c.url,c),i.push(l),r=T.add({todo:d},"kmllayer",l),s(n,{todo:d},l,r)}),p(e,o?i:i[0]),void 0):(p(e,!1),void 0)},this.panel=function(i){v();var a,s,o=0,r=0,l=t(document.createElement("div"));l.css({position:"absolute",zIndex:1e3,visibility:"hidden"}),i.opts.content&&(s=t(i.opts.content),l.append(s),n.first().prepend(l),i.opts.left!==e?o=i.opts.left:i.opts.right!==e?o=n.width()-s.width()-i.opts.right:i.opts.center&&(o=(n.width()-s.width())/2),i.opts.top!==e?r=i.opts.top:i.opts.bottom!==e?r=n.height()-s.height()-i.opts.bottom:i.opts.middle&&(r=(n.height()-s.height())/2),l.css({top:r,left:o,visibility:"visible"})),a=T.add(i,"panel",l),p(i,l,a),l=null},this.marker=function(e){var a="values"in e.todo,o=!L;if(a||(e.opts.position=e.latLng||x(e.opts.position),e.todo.values=[{options:e.opts}]),!e.todo.values.length)return p(e,!1),void 0;if(o&&v(),e.todo.cluster&&!L.getBounds())return google.maps.event.addListenerOnce(L,"bounds_changed",function(){N.marker.apply(N,[e])}),void 0;if(e.todo.cluster){var r,l;e.todo.cluster instanceof f?(r=e.todo.cluster,l=T.getById(r.id(),!0)):(l=C(e.todo.cluster),r=new f(i(e.todo.id,!0),l),T.add(e,"clusterer",r,l)),l.beginUpdate(),t.each(e.todo.values,function(t,n){var i=u(e,n);i.options.position=i.options.position?x(i.options.position):x(n),i.options.map=L,o&&(L.setCenter(i.options.position),o=!1),l.add(i,n)}),l.endUpdate(),p(e,r)}else{var c=[];t.each(e.todo.values,function(t,i){var a,r,l=u(e,i);l.options.position=l.options.position?x(l.options.position):x(i),l.options.map=L,o&&(L.setCenter(l.options.position),o=!1),r=new A.classes.Marker(l.options),c.push(r),a=T.add({todo:l},"marker",r),s(n,{todo:l},r,a)}),p(e,a?c:c[0])}},this.getroute=function(t){t.opts.origin=x(t.opts.origin,!0),t.opts.destination=x(t.opts.destination,!0),y().route(t.opts,function(e,n){d(t,n==google.maps.DirectionsStatus.OK?e:!1,n),S.ack()})},this.directionsrenderer=function(e){e.opts.map=L;var n,i=new google.maps.DirectionsRenderer(e.opts);e.todo.divId?i.setPanel(document.getElementById(e.todo.divId)):e.todo.container&&i.setPanel(t(e.todo.container).get(0)),n=T.add(e,"directionsrenderer",i),p(e,i,n)},this.getgeoloc=function(t){p(t,t.latLng)},this.styledmaptype=function(t){v();var e=new A.classes.StyledMapType(t.todo.styles,t.opts);L.mapTypes.set(t.todo.id,e),p(t,e)},this.imagemaptype=function(t){v();var e=new A.classes.ImageMapType(t.opts);L.mapTypes.set(t.todo.id,e),p(t,e)},this.autofit=function(e){var n=new google.maps.LatLngBounds;t.each(T.all(),function(t,e){e.getPosition?n.extend(e.getPosition()):e.getBounds?(n.extend(e.getBounds().getNorthEast()),n.extend(e.getBounds().getSouthWest())):e.getPaths?e.getPaths().forEach(function(t){t.forEach(function(t){n.extend(t)})}):e.getPath?e.getPath().forEach(function(t){n.extend(t)}):e.getCenter?n.extend(e.getCenter()):e instanceof f&&(e=T.getById(e.id(),!0),e&&e.autofit(n))}),n.isEmpty()||L.getBounds()&&L.getBounds().equals(n)||("maxZoom"in e.todo&&google.maps.event.addListenerOnce(L,"bounds_changed",function(){this.getZoom()>e.todo.maxZoom&&this.setZoom(e.todo.maxZoom)}),L.fitBounds(n)),p(e,!0)},this.clear=function(e){if("string"==typeof e.todo){if(T.clearById(e.todo)||T.objClearById(e.todo))return p(e,!0),void 0;e.todo={name:e.todo}}e.todo.id?t.each(M(e.todo.id),function(t,e){T.clearById(e)||T.objClearById(e)}):(T.clear(M(e.todo.name),e.todo.last,e.todo.first,e.todo.tag),T.objClear(M(e.todo.name),e.todo.last,e.todo.first,e.todo.tag)),p(e,!0)},this.exec=function(e){var i=this;t.each(M(e.todo.func),function(a,s){t.each(i.get(e.todo,!0,e.todo.hasOwnProperty("full")?e.todo.full:!0),function(t,e){s.call(n,e)})}),p(e,!0)},this.get=function(n,i,a){var s,o,r=i?n:n.todo;return i||(a=r.full),"string"==typeof r?(o=T.getById(r,!1,a)||T.objGetById(r),o===!1&&(s=r,r={})):s=r.name,"map"===s&&(o=L),o||(o=[],r.id?(t.each(M(r.id),function(t,e){o.push(T.getById(e,!1,a)||T.objGetById(e))}),t.isArray(r.id)||(o=o[0])):(t.each(s?M(s):[e],function(e,n){var i;r.first?(i=T.get(n,!1,r.tag,a),i&&o.push(i)):r.all?t.each(T.all(n,r.tag,a),function(t,e){o.push(e)}):(i=T.get(n,!0,r.tag,a),i&&o.push(i))}),r.all||t.isArray(s)||(o=o[0]))),o=t.isArray(o)||!r.all?o:[o],i?o:(p(n,o),void 0)},this.getdistance=function(t){var e;for(t.opts.origins=M(t.opts.origins),e=0;e<t.opts.origins.length;e++)t.opts.origins[e]=x(t.opts.origins[e],!0);for(t.opts.destinations=M(t.opts.destinations),e=0;e<t.opts.destinations.length;e++)t.opts.destinations[e]=x(t.opts.destinations[e],!0);k().getDistanceMatrix(t.opts,function(e,n){d(t,n===google.maps.DistanceMatrixStatus.OK?e:!1,n),S.ack()})},this.trigger=function(e){if("string"==typeof e.todo)google.maps.event.trigger(L,e.todo);else{var n=[L,e.todo.eventName];e.todo.var_args&&t.each(e.todo.var_args,function(t,e){n.push(e)}),google.maps.event.trigger.apply(google.maps.event,n)}d(e),S.ack()}}function L(t){var e;if(!t.hasOwnProperty("get"))return!1;for(e in t)if("get"!==e)return!1;return!t.get.hasOwnProperty("callback")}var A,F=0,j={},O=new d;t.fn.gmap3=function(){var e,i=[],a=!0,s=[];for(n(),e=0;e<arguments.length;e++)arguments[e]&&i.push(arguments[e]);return i.length||i.push("map"),t.each(this,function(){var e=t(this),n=e.data("gmap3");a=!1,n||(n=new T(e),e.data("gmap3",n)),1!==i.length||"get"!==i[0]&&!L(i[0])?n._plan(i):"get"===i[0]?s.push(n.get("map",!0)):s.push(n.get(i[0].get,!0,i[0].get.full))}),s.length?1===s.length?s[0]:s:this}}(jQuery);